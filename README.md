The occupency detectors is designed to blink a green LED every three seconds if the sensor does not detect someone. When someone is detected, the red LED blinks every second. After ten seconds, if the sensor stil detects someone the light will stay on but wont blink. If no one is detected, the green led will blink every three seconds. In order to accomplish this task. A statemachine was used. There are three states. ARMED_STATE, WARNING_STATE and ALAERT_STATE. A switch state was used to accomplish this. In the ARMED_STATE, The green LED blinks every three seconds. It used a pull up resitor to constantle check if the sensor detects someone. The code has a big delay before switching to the WARNING_STATE. This is due to the delay. In the WARNING_STATE, the red LED will blink every second for ten seconds before changing states. To do this, the code keep tracks of everytime the led blinks. Because it takes .5 seconds to toggle on or off. The counter counts up to 20. At 20 if the sensor doesn't detect anyone, the code will go back to the ARMED_STATE. If the sensor detetcs something, the next state is the ALERT_STATE. In this state, the red LED will not blink. In this state their is a reset option. By clicking the button(P4.1). The system will reset and return to ARMED_STATE.
